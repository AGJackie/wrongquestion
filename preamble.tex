\usepackage{xcolor}
\usepackage{geometry}
\usepackage{etoc}
\usepackage{tasks}
\usepackage{tipa}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{amsmath, amssymb, bm}
\usepackage{xeCJKfntef}
\usepackage{tikz}
\usepackage[most]{tcolorbox}
\usepackage{stackengine}
\usepackage[calc]{datetime2}
\DTMsetdatestyle{iso}
\usepackage[hidelinks]{hyperref}
\hypersetup{
  bookmarksopen,
  CJKbookmarks,
}
\usepackage{bookmark}
\usepackage[xspace]{ellipsis}

%% toc style
\newcommand*{\DotsAndPage}{%
  \nobreak\hskip 5pt\leaders\hbox{%
    \bfseries\normalsize\hbox to .75ex {\hss.\hss}
  }\hfill\nobreak
  \makebox{\large\bfseries\normalsize\itshape\etocpage}\par
}
\etocsetstyle{subsection}
  {}
  {\leftskip 0pt \rightskip .75cm \parfillskip-\rightskip
  \pagebreak[1]\smallskip}
  {\large\rmfamily\bfseries\scshape{\color{teal}\etocname}\DotsAndPage}
  {}
\renewcommand{\etoccolumnsep}{4em}
\etocsettocstyle{}{\clearpage}
\etocmulticolstyle[3]{
  \noindent\bfseries\Large
  \leaders\hrule height1pt\hfill
  \MakeUppercase{Table of Contents}
}

\ctexset{
  section/format=\raggedright\bfseries\huge,
}

\renewcommand{\ellipsisgap}{0.1em}
\setlength\parindent{0pt}

\newtcbox{\reviewtoday}{
  colframe=red!20, colback=yellow!10, fontupper=\small\itshape,
  size=small,
}

% \ExplSyntaxOn
% \NewDocumentCommand{\defineclist}{mm}
 % {
  % \clist_clear_new:c { l__#1_clist }
  % \clist_set:cn { l__#1_clist } { #2 }
 % }
% \ExplSyntaxOff

\makeatletter
\ExplSyntaxOn
\cs_new_protected:Npn \custom_label:nn #1#2
  {
    % \protected@write \@auxout {}{\string \newlabel {#1}{{#2}{\thepage}{#2}{#1}{}} }%
    \iow_shipout:Nx \@auxout { \token_to_str:N \newlabel{#1}{{#2}{\thepage}{#2}{#1}{}} }%
    \hypertarget{#1}{}
  }
\cs_generate_variant:Nn \custom_label:nn {xx}
\NewDocumentCommand {\customlabel} {mm}
  {
    \custom_label:nn {#1} {#2}
  }
% \newcommand{\customlabel}[2]{%
% }
\ExplSyntaxOff
\makeatother
